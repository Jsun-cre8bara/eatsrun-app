# 프론트엔드 앱 테스트 가이드

## 1. 백엔드 API 서버 실행 확인

먼저 백엔드 API 서버가 실행 중인지 확인하세요:

```bash
# 백엔드 API 디렉토리에서
cd ../eatsrun-api
npm run dev
```

서버가 `http://localhost:3000`에서 실행되어야 합니다.

## 2. 프론트엔드 앱 실행

### 개발 서버 시작

```bash
# 프론트엔드 앱 디렉토리에서
cd eatsrun-app
npm start
```

또는

```bash
expo start
```

### 플랫폼별 실행

터미널에서 다음 키를 눌러 실행:
- **`w`** - 웹 브라우저에서 실행
- **`a`** - Android 에뮬레이터/기기에서 실행
- **`i`** - iOS 시뮬레이터에서 실행
- **`r`** - 앱 리로드
- **`j`** - 디버거 열기

## 3. 테스트 시나리오

### 기본 플로우 테스트

#### 1. 로그인 테스트
1. 앱 실행 → 스플래시 화면
2. 로그인 화면에서 "카카오로 시작하기" 또는 "네이버로 시작하기" 클릭
3. 테스트 모드 알림에서 "확인" 클릭
4. 홈 화면으로 이동 확인

#### 2. 행사 등록 및 선택 테스트
1. 홈 화면에서 "참여할 행사를 선택하세요" 카드 클릭
2. 행사 목록 화면에서 우측 상단 `+` 버튼 클릭
3. 행사 정보 입력:
   - 행사명: "2024 서울 마라톤"
   - 유형: 러닝 선택
   - 지역: "서울시 강남구"
   - 시작일: "2024-12-20"
   - 종료일: "2024-12-22"
4. "행사 등록" 버튼 클릭
5. 행사 목록에 새 행사가 추가되었는지 확인
6. 행사 카드 클릭하여 상세 화면으로 이동
7. "러너" 또는 "방문자" 선택 후 "참여하기" 클릭

#### 3. 지도 테스트
1. 홈 화면에서 "지도" 버튼 클릭
2. 포스트 위치가 지도에 표시되는지 확인
3. 마커 클릭 시 포스트 정보 카드 표시 확인
4. "QR 스캔하기" 버튼 클릭

#### 4. QR 스캔 및 게임 테스트
1. QR 스캔 화면에서 테스트 QR 코드 입력 (또는 실제 QR 스캔)
2. 게임 화면으로 자동 이동 확인
3. 게임 타입 확인 (룰렛, 사다리, 카드, 슬롯, 뽑기 중 하나)
4. 게임 시작 버튼 클릭
5. 게임 완료 후 카테고리 선택 화면 확인
6. 카테고리 선택 후 쿠폰 획득 확인

#### 5. 쿠폰 사용 테스트
1. 홈 화면에서 "내 쿠폰" 섹션 확인
2. "전체보기 →" 클릭하여 쿠폰 목록 확인
3. 쿠폰 카드 클릭하여 상세 화면 확인
4. QR 코드가 표시되는지 확인

#### 6. 스탬프 및 교환권 테스트 (축제 모드)
1. 축제 행사에 참여한 경우
2. 홈 화면에서 "스탬프" 버튼 클릭
3. 스탬프 수집 현황 확인
4. 교환권 획득 가능 여부 확인
5. "교환권" 메뉴에서 교환권 목록 확인

#### 7. 완주 인증 테스트 (러너 모드)
1. 러닝 행사에 참여한 경우
2. 마이페이지에서 "완주 인증" 메뉴 클릭
3. 바코드 번호 입력 (테스트: "TEST-BARCODE-123")
4. "인증하기" 버튼 클릭
5. 완주 보상 쿠폰 활성화 확인

#### 8. 마이페이지 테스트
1. 홈 화면 우측 상단 프로필 아이콘 클릭
2. 사용자 정보 확인
3. 활동 현황 통계 확인
4. 각 메뉴 항목 클릭하여 이동 확인
5. 로그아웃 기능 테스트

## 4. API 연동 확인

### 개발자 도구에서 확인

웹에서 실행하는 경우:
1. 브라우저 개발자 도구 열기 (F12)
2. Network 탭 확인
3. API 호출이 `http://localhost:3000/v1`로 가는지 확인

모바일에서 실행하는 경우:
1. Expo 개발자 메뉴 열기 (흔들기 또는 `j` 키)
2. "Debug Remote JS" 활성화
3. Chrome DevTools에서 Network 탭 확인

### 콘솔 로그 확인

앱 실행 중 터미널에서 다음 로그들을 확인할 수 있습니다:
- `🔐 카카오 로그인 시도...`
- `🧪 테스트 모드: 모의 로그인 처리`
- `✅ 로그인 성공`
- `🎪 행사 등록 (테스트 모드):`
- `🏁 완주 인증 (테스트 모드):`

## 5. 문제 해결

### 백엔드 연결 오류

**증상:** "서버에 연결할 수 없습니다" 에러

**해결 방법:**
1. 백엔드 서버가 실행 중인지 확인
   ```bash
   curl http://localhost:3000/health
   ```

2. `src/api/client.ts`에서 API URL 확인
   - 웹: `http://localhost:3000/v1`
   - Android 에뮬레이터: `http://10.0.2.2:3000/v1`
   - iOS 시뮬레이터: `http://localhost:3000/v1`
   - 실제 기기: 개발자 PC의 IP 주소 사용 필요

3. 실제 기기에서 테스트하는 경우:
   - 개발자 PC의 로컬 IP 주소 확인
   - `src/api/client.ts`에서 해당 IP로 변경
   - 예: `http://192.168.0.100:3000/v1`

### 테스트 모드 vs 실제 API 모드

**테스트 모드 (현재):**
- 로그인: 테스트 토큰 사용 시 자동으로 모의 로그인
- 행사 등록: 실제 API 호출 (백엔드 필요)
- 완주 인증: 테스트 모드로 동작

**실제 API 모드:**
- 모든 기능이 실제 백엔드 API와 통신
- 백엔드 서버가 반드시 실행 중이어야 함

## 6. 주요 테스트 포인트

### ✅ 정상 동작 확인 항목

- [ ] 로그인 성공 후 홈 화면 이동
- [ ] 행사 목록 조회
- [ ] 행사 등록 및 목록에 반영
- [ ] 행사 참여 (러너/방문자 선택)
- [ ] 지도에서 포스트 위치 표시
- [ ] QR 스캔 후 게임 시작
- [ ] 게임 완료 후 쿠폰 획득
- [ ] 쿠폰 목록 및 상세 조회
- [ ] 스탬프 수집 (축제 모드)
- [ ] 교환권 획득 및 목록 (축제 모드)
- [ ] 완주 인증 (러너 모드)
- [ ] 마이페이지 정보 표시
- [ ] 로그아웃 기능

### ⚠️ 주의사항

1. **웹에서 실행 시:**
   - 지도 기능이 제한적일 수 있음
   - QR 스캔은 웹 카메라 사용

2. **실제 기기에서 실행 시:**
   - API URL을 개발자 PC의 IP로 변경 필요
   - 위치 권한 요청 필요
   - 카메라 권한 요청 필요

3. **백엔드 없이 테스트:**
   - 로그인은 테스트 모드로 동작
   - 행사 등록 등은 백엔드 필요

## 7. 빠른 테스트 체크리스트

```
□ 1. 백엔드 서버 실행 확인 (http://localhost:3000/health)
□ 2. 프론트엔드 앱 실행 (npm start)
□ 3. 로그인 테스트
□ 4. 행사 등록 테스트
□ 5. 행사 참여 테스트
□ 6. 지도 확인
□ 7. QR 스캔 → 게임 → 쿠폰 획득 플로우
□ 8. 쿠폰 목록 확인
□ 9. 마이페이지 확인
```

## 8. 디버깅 팁

### React Native Debugger 사용

1. Expo 개발자 메뉴에서 "Debug Remote JS" 활성화
2. Chrome DevTools에서 디버깅 가능
3. Network 탭에서 API 호출 확인
4. Console 탭에서 로그 확인

### 로그 확인

앱의 모든 주요 동작에 콘솔 로그가 포함되어 있습니다:
- 로그인: `🔐`, `✅`, `❌`
- 행사: `🎪`
- 게임: `🎮`
- 쿠폰: `🎟️`
- 완주: `🏁`

이 로그들을 통해 각 단계의 성공/실패를 확인할 수 있습니다.




